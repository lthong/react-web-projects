(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{101:function(e,t,n){"use strict";n.r(t);var r=n(86),c=n.n(r),a=n(10),u=n.n(a),l=n(1),o=n.n(l),i=function(e){var t=e.update,n=void 0===t?function(){}:t,r=e.delay,c=void 0===r?100:r,a=e.isStartInterval,u=Object(l.useRef)(n),o=Object(l.useRef)();Object(l.useEffect)((function(){u.current=n}),[n]),Object(l.useEffect)((function(){return a&&(o.current=setInterval(u.current,c)),function(){clearInterval(o.current)}}),[a,c])},s=window.innerWidth<530?300:360,f=s-20,b={ArrowUp:{x:0,y:-20,invalidKey:"ArrowDown"},ArrowDown:{x:0,y:20,invalidKey:"ArrowUp"},ArrowLeft:{x:-20,y:0,invalidKey:"ArrowRight"},ArrowRight:{x:20,y:0,invalidKey:"ArrowLeft"}},m=Object.keys(b),d="INIT",v="START",y="PAUSE",k="END",w=s/2,O=Array(3).fill(null).map((function(e,t){var n=b.ArrowUp;return{x:w+n.x*t,y:w-n.y*t}})),j=function(){return 20*Math.floor(Math.random()*(s/20))},E=function e(t){var n={x:j(),y:j()};return[n.x,n.y].some((function(e){return[0,f].includes(e)}))||(null==t?void 0:t.some((function(e){var t=e.x,r=e.y;return t===n.x&&r===n.y})))?e(t):n},C=n(12),x=function(){var e=Object(l.useRef)(null),t=Object(l.useRef)(O),n=Object(l.useRef)("ArrowUp"),r=Object(l.useRef)(E(O)),a=Object(l.useState)(0),w=u()(a,2),j=w[0],x=w[1],A=Object(l.useState)(d),p=u()(A,2),N=p[0],h=p[1],g=Object(l.useCallback)((function(){var t=e.current,n=t.getContext("2d");n.fillStyle="black",n.fillRect(0,0,t.width,t.height)}),[]),R=Object(l.useCallback)((function(){var n=e.current.getContext("2d");n.fillStyle="lime",t.current.forEach((function(e){var t=e.x,r=e.y;n.fillRect(t,r,19,19)}))}),[]),S=Object(l.useCallback)((function(){var t=e.current.getContext("2d");t.fillStyle="red",t.fillRect(r.current.x,r.current.y,19,19)}),[]),U=Object(l.useCallback)((function(){var e=t.current[0];return{x:e.x+b[n.current].x,y:e.y+b[n.current].y}}),[]),I=Object(l.useCallback)((function(){var e,n,a,u=t.current[0],l=u.x,o=u.y,i=(n=(e={x:l,y:o}).x,a=e.y,n<=0||a<=0||n>=f||a>=f),s=t.current.some((function(e,t){var n=e.x,r=e.y;return 0!==t&&l===n&&o===r}));if((i||s)&&h(k),l===r.current.x&&o===r.current.y){x((function(e){return e+1}));var b=[U()].concat(c()(t.current));t.current=b,r.current=E(b)}}),[U]),K=Object(l.useCallback)((function(){var e=U(),n=t.current.filter((function(e,n){return n!==t.current.length-1}));t.current=[e].concat(c()(n))}),[U]),L=Object(l.useCallback)((function(){g(),K(),S(),R(),I()}),[g,K,R,S,I]),D=Object(l.useMemo)((function(){return N===v}),[N]);i({update:L,delay:150,isStartInterval:D});var M=Object(l.useCallback)((function(e){var t=e.key;m.includes(t)&&D&&b[n.current].invalidKey!==t&&(n.current=t)}),[D]);Object(l.useEffect)((function(){return window.addEventListener("keydown",M),function(){window.removeEventListener("keydown",M)}}),[M]);var P=Object(l.useCallback)((function(){h(v)}),[]),T=Object(l.useCallback)((function(){h(y)}),[]),J=Object(l.useCallback)((function(){h(d),g(),t.current=O,r.current=E(O),n.current="ArrowUp",x(0)}),[g]),G=Object(l.useCallback)((function(){M({key:"ArrowDown"})}),[M]),W=Object(l.useCallback)((function(){M({key:"ArrowLeft"})}),[M]),q=Object(l.useCallback)((function(){M({key:"ArrowRight"})}),[M]),z=Object(l.useCallback)((function(){M({key:"ArrowUp"})}),[M]);return Object(l.useEffect)((function(){g(),R()}),[]),o.a.createElement("div",{className:"snake-game"},o.a.createElement("div",{className:"map-block"},o.a.createElement("div",{className:"top-info"},o.a.createElement("div",{className:"score"},"Score ",j)),o.a.createElement("canvas",{ref:e,width:s,height:s}),o.a.createElement("div",{className:"status-btns"},N!==k&&(N===v?o.a.createElement("button",{className:"ui red button",onClick:T},"Pause"):o.a.createElement("button",{className:"ui green button",onClick:P},"Start")),N!==d&&o.a.createElement("button",{className:"ui grey button",onClick:J},"Reset")),o.a.createElement("div",{className:"direction-btns"},o.a.createElement("button",{className:"ui icon blue button down",onClick:G},o.a.createElement(C.d,null)),o.a.createElement("button",{className:"ui icon blue button left",onClick:W},o.a.createElement(C.e,null)),o.a.createElement("button",{className:"ui icon blue button right",onClick:q},o.a.createElement(C.f,null)),o.a.createElement("button",{className:"ui icon blue button up",onClick:z},o.a.createElement(C.g,null)))),N===d&&o.a.createElement("div",{className:"status-info"},"Press Start"),N===k&&o.a.createElement("div",{className:"status-info"},"Game Over"))};n(98),t.default=x},98:function(e,t,n){}}]);