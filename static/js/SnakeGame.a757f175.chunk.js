(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{106:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var r=n(90),c=n.n(r),a=n(12),u=n.n(a),l=n(1),i=n.n(l),o=function(e){var t=e.update,n=void 0===t?function(){}:t,r=e.delay,c=void 0===r?100:r,a=e.isStartInterval,u=Object(l.useRef)(n),i=Object(l.useRef)();Object(l.useEffect)((function(){u.current=n}),[n]),Object(l.useEffect)((function(){return a&&(i.current=setInterval(u.current,c)),function(){clearInterval(i.current)}}),[a,c])},s=window.innerWidth<530?280:360,f=s-20,b={ArrowUp:{x:0,y:-20,invalidKey:"ArrowDown"},ArrowDown:{x:0,y:20,invalidKey:"ArrowUp"},ArrowLeft:{x:-20,y:0,invalidKey:"ArrowRight"},ArrowRight:{x:20,y:0,invalidKey:"ArrowLeft"}},m=Object.keys(b),d="INIT",v="START",y="PAUSE",k="END",w=s/2,E=Array(3).fill(null).map((function(e,t){var n=b.ArrowUp;return{x:w+n.x*t,y:w-n.y*t}})),O=function(){return 20*Math.floor(Math.random()*(s/20))},j=function e(t){var n={x:O(),y:O()};return[n.x,n.y].some((function(e){return[0,f].includes(e)}))||(null==t?void 0:t.some((function(e){var t=e.x,r=e.y;return t===n.x&&r===n.y})))?e(t):n},C=n(13),x=n(99),N=function(){var e=Object(l.useRef)(null),t=Object(l.useRef)(E),n=Object(l.useRef)("ArrowUp"),r=Object(l.useRef)(j(E)),a=Object(l.useState)(0),w=u()(a,2),O=w[0],N=w[1],A=Object(l.useState)(d),p=u()(A,2),h=p[0],g=p[1],R=Object(l.useCallback)((function(){var t=e.current,n=t.getContext("2d");n.fillStyle="black",n.fillRect(0,0,t.width,t.height)}),[]),S=Object(l.useCallback)((function(){var n=e.current.getContext("2d");n.fillStyle="lime",t.current.forEach((function(e){var t=e.x,r=e.y;n.fillRect(t,r,19,19)}))}),[]),U=Object(l.useCallback)((function(){var t=e.current.getContext("2d");t.fillStyle="red",t.fillRect(r.current.x,r.current.y,19,19)}),[]),I=Object(l.useCallback)((function(){var e=t.current[0];return{x:e.x+b[n.current].x,y:e.y+b[n.current].y}}),[]),K=Object(l.useCallback)((function(){var e,n,a,u=t.current[0],l=u.x,i=u.y,o=(n=(e={x:l,y:i}).x,a=e.y,n<0||a<0||n>f||a>f),s=t.current.some((function(e,t){var n=e.x,r=e.y;return 0!==t&&l===n&&i===r}));if((o||s)&&g(k),l===r.current.x&&i===r.current.y){N((function(e){return e+1}));var b=[I()].concat(c()(t.current));t.current=b,r.current=j(b)}}),[I]),L=Object(l.useCallback)((function(){var e=I(),n=t.current.filter((function(e,n){return n!==t.current.length-1}));t.current=[e].concat(c()(n))}),[I]),D=Object(l.useCallback)((function(){R(),L(),U(),S(),K()}),[R,L,S,U,K]),M=Object(l.useMemo)((function(){return h===v}),[h]);o({update:D,delay:150,isStartInterval:M});var P=Object(l.useCallback)((function(e){var t=e.key;m.includes(t)&&M&&b[n.current].invalidKey!==t&&(n.current=t)}),[M]);Object(l.useEffect)((function(){return window.addEventListener("keydown",P),function(){window.removeEventListener("keydown",P)}}),[P]);var T=Object(l.useCallback)((function(){g(v)}),[]),J=Object(l.useCallback)((function(){g(y)}),[]),G=Object(l.useCallback)((function(){g(d),R(),t.current=E,r.current=j(E),n.current="ArrowUp",N(0)}),[R]),W=Object(l.useCallback)((function(){P({key:"ArrowDown"})}),[P]),q=Object(l.useCallback)((function(){P({key:"ArrowLeft"})}),[P]),z=Object(l.useCallback)((function(){P({key:"ArrowRight"})}),[P]),B=Object(l.useCallback)((function(){P({key:"ArrowUp"})}),[P]);return Object(l.useEffect)((function(){R(),S()}),[]),i.a.createElement("div",{className:"snake-game"},i.a.createElement("div",{className:"map-block"},i.a.createElement("div",{className:"top-info"},h===v&&i.a.createElement("div",null,"鍵盤方向鍵控制移動"),i.a.createElement("div",{className:"score"},"Score ",O)),i.a.createElement("canvas",{ref:e,width:s,height:s}),i.a.createElement("div",{className:"status-btns"},h!==k&&(h===v?i.a.createElement("button",{className:"ui red button",onClick:J},"Pause"):i.a.createElement("button",{className:"ui green button start",onClick:T},"Start")),h!==d&&i.a.createElement("button",{className:"ui grey button",onClick:G},"Reset")),i.a.createElement("div",{className:"direction-btns"},i.a.createElement("button",{className:"ui icon blue button down",onClick:W},i.a.createElement(C.d,null)),i.a.createElement("button",{className:"ui icon blue button left",onClick:q},i.a.createElement(C.e,null)),i.a.createElement("button",{className:"ui icon blue button right",onClick:z},i.a.createElement(C.f,null)),i.a.createElement("button",{className:"ui icon blue button up",onClick:B},i.a.createElement(C.g,null)))),h===d&&i.a.createElement("div",{className:"status-info init"},i.a.createElement(x.a,{className:"icon"}),"Press Start",i.a.createElement(x.a,{className:"icon"})),h===k&&i.a.createElement("div",{className:"status-info"},"Game Over"))};n(106),t.default=N}}]);