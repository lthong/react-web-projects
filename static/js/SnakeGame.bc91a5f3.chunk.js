(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{101:function(e,t,n){"use strict";var r=n(12),c=n.n(r),a=n(1);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resizeCallback,n=void 0===t?function(){}:t,r=Object(a.useState)(window.innerWidth<530),u=c()(r,2),i=u[0],l=u[1];return Object(a.useEffect)((function(){var e=function(){l(window.innerWidth<530),n&&n()};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[n]),{isMobile:i}}},106:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var r=n(90),c=n.n(r),a=n(12),u=n.n(a),i=n(1),l=n.n(i),o=n(8),s=function(e){var t=e.update,n=void 0===t?function(){}:t,r=e.delay,c=void 0===r?100:r,a=e.isStartInterval,u=Object(i.useRef)(n),l=Object(i.useRef)();Object(i.useEffect)((function(){u.current=n}),[n]),Object(i.useEffect)((function(){return a&&(l.current=setInterval(u.current,c)),function(){clearInterval(l.current)}}),[a,c])},f=n(101),b=window.innerWidth<530?240:360,d=b-20,m={ArrowUp:{x:0,y:-20,invalidKey:"ArrowDown"},ArrowDown:{x:0,y:20,invalidKey:"ArrowUp"},ArrowLeft:{x:-20,y:0,invalidKey:"ArrowRight"},ArrowRight:{x:20,y:0,invalidKey:"ArrowLeft"}},v=Object.keys(m),w="INIT",y="START",k="PAUSE",E="END",O=b/2,j=Array(3).fill(null).map((function(e,t){var n=m.ArrowUp;return{x:O+n.x*t,y:O-n.y*t}})),C=function(){return 20*Math.floor(Math.random()*(b/20))},x=function e(t){var n={x:C(),y:C()};return[n.x,n.y].some((function(e){return[0,d].includes(e)}))||(null==t?void 0:t.some((function(e){var t=e.x,r=e.y;return t===n.x&&r===n.y})))?e(t):n},h=n(13),N=n(99),p=function(){var e=Object(i.useRef)(null),t=Object(i.useRef)(j),n=Object(i.useRef)("ArrowUp"),r=Object(i.useRef)(x(j)),a=Object(i.useState)(0),O=u()(a,2),C=O[0],p=O[1],A=Object(i.useState)(w),g=u()(A,2),R=g[0],S=g[1],L=Object(f.a)().isMobile,U=Object(i.useCallback)((function(){var t=e.current,n=t.getContext("2d");n.fillStyle="black",n.fillRect(0,0,t.width,t.height)}),[]),I=Object(i.useCallback)((function(){var n=e.current.getContext("2d");n.fillStyle="lime",t.current.forEach((function(e){var t=e.x,r=e.y;n.fillRect(t,r,19,19)}))}),[]),K=Object(i.useCallback)((function(){var t=e.current.getContext("2d");t.fillStyle="red",t.fillRect(r.current.x,r.current.y,19,19)}),[]),M=Object(i.useCallback)((function(){var e=t.current[0];return{x:e.x+m[n.current].x,y:e.y+m[n.current].y}}),[]),D=Object(i.useCallback)((function(){var e,n,a,u=t.current[0],i=u.x,l=u.y,o=(n=(e={x:i,y:l}).x,a=e.y,n<0||a<0||n>d||a>d),s=t.current.some((function(e,t){var n=e.x,r=e.y;return 0!==t&&i===n&&l===r}));if((o||s)&&S(E),i===r.current.x&&l===r.current.y){p((function(e){return e+1}));var f=[M()].concat(c()(t.current));t.current=f,r.current=x(f)}}),[M]),z=Object(i.useCallback)((function(){var e=M(),n=t.current.filter((function(e,n){return n!==t.current.length-1}));t.current=[e].concat(c()(n))}),[M]),P=Object(i.useCallback)((function(){U(),z(),K(),I(),D()}),[U,z,I,K,D]),T=Object(i.useMemo)((function(){return R===y}),[R]);s({update:P,delay:150,isStartInterval:T});var W=Object(i.useCallback)((function(e){var t=e.key;v.includes(t)&&T&&m[n.current].invalidKey!==t&&(n.current=t)}),[T]);Object(i.useEffect)((function(){return window.addEventListener("keydown",W),function(){window.removeEventListener("keydown",W)}}),[W]);var J=Object(i.useCallback)((function(){S(y)}),[]),G=Object(i.useCallback)((function(){S(k)}),[]),q=Object(i.useCallback)((function(){S(w),U(),t.current=j,r.current=x(j),n.current="ArrowUp",p(0)}),[U]),B=Object(i.useCallback)((function(){W({key:"ArrowDown"})}),[W]),F=Object(i.useCallback)((function(){W({key:"ArrowLeft"})}),[W]),H=Object(i.useCallback)((function(){W({key:"ArrowRight"})}),[W]),Q=Object(i.useCallback)((function(){W({key:"ArrowUp"})}),[W]);return Object(i.useEffect)((function(){U(),I()}),[]),l.a.createElement("div",{className:"snake-game"},l.a.createElement("div",{className:"map-block"},l.a.createElement("div",{className:"top-info"},R===y&&l.a.createElement("div",null,"鍵盤方向鍵控制移動"),l.a.createElement("div",{className:"score"},"Score ",C)),l.a.createElement("canvas",{ref:e,width:b,height:b}),l.a.createElement("div",{className:Object(o.a)("status-btns",{"m-platform":L})},R!==E&&(R===y?l.a.createElement("button",{className:"ui red button",onClick:G},"Pause"):l.a.createElement("button",{className:"ui green button start",onClick:J},"Start")),R!==w&&l.a.createElement("button",{className:"ui grey button",onClick:q},"Reset")),l.a.createElement("div",{className:"direction-btns"},l.a.createElement("button",{className:"ui icon blue button down",onClick:B},l.a.createElement(h.d,null)),l.a.createElement("button",{className:"ui icon blue button left",onClick:F},l.a.createElement(h.e,null)),l.a.createElement("button",{className:"ui icon blue button right",onClick:H},l.a.createElement(h.f,null)),l.a.createElement("button",{className:"ui icon blue button up",onClick:Q},l.a.createElement(h.g,null)))),R===w&&l.a.createElement("div",{className:"status-info init"},l.a.createElement(N.a,{className:"icon"}),"Press Start",l.a.createElement(N.a,{className:"icon"})),R===E&&l.a.createElement("div",{className:"status-info"},"Game Over"))};n(106),t.default=p}}]);