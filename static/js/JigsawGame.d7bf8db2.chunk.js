(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{104:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var r=n(22),c=n.n(r),o=n(12),a=n.n(o),i=n(1),l=n.n(i),u=[n.p+"static/media/hakase.16003822.jpg",n.p+"static/media/dog.dd5afbd9.jpg",n.p+"static/media/penguin.e0038c4e.jpg"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=Array(4).fill(null),g=function(){return function(e){for(var t=e.length-1;t>0;t-=1){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}(p.map((function(e,t){return t+1}))).reduce((function(e,t,n){return b(b({},e),{},c()({},n,t))}),{})},f=n(95),d=n.n(f),m=n(96),v=n.n(m),O=function(e){var t=e.children,n=e.classNames,r=e.isRipple,c=void 0===r||r,o=e.rippleColor,a=void 0===o?"light":o,i=e.bgColor,u=void 0===i?"blue":i,s=e.bgColorWeight,b=void 0===s?500:s,p=v()(e,["children","classNames","isRipple","rippleColor","bgColor","bgColorWeight"]);return l.a.createElement("button",d()({type:"button","data-mdb-ripple":c,"data-mdb-ripple-color":a,className:"inline-block px-6 py-2.5 bg-".concat(u,"-").concat(b," text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-").concat(u,"-").concat(b+100," hover:shadow-lg focus:bg-").concat(u,"-").concat(b+100," focus:shadow-lg focus:outline-none focus:ring-0 active:bg-").concat(u,"-").concat(b+200," active:shadow-lg transition duration-150 ease-in-out ").concat(n)},p),t)};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){var e=Object(i.useRef)(null),t=Object(i.useState)(g()),n=a()(t,2),r=n[0],o=n[1],s=Object(i.useState)({}),b=a()(s,2),f=b[0],d=b[1],m=Object(i.useState)({}),v=a()(m,2),h=v[0],y=v[1],x=Object(i.useState)(0),w=a()(x,2),E=w[0],k=w[1],C=Object(i.useState)(!1),D=a()(C,2),I=D[0],P=D[1],N=Object(i.useState)({}),S=a()(N,2),M=S[0],R=S[1],T=Object(i.useCallback)((function(){o(g()),d({})}),[]),B=Object(i.useCallback)((function(){k((function(e){return e+1>=u.length?0:e+1})),T()}),[T]),X=Object(i.useCallback)((function(){var e=Object.values(f),t=e.length>0&&e.every((function(e,t){return e===Number(t)+1}));alert(t?"恭喜答對！":"加油！快完成了！"),t&&B()}),[f,B]),Y=Object(i.useCallback)((function(){P((function(e){return!e}))}),[]);return l.a.createElement("div",{className:"jigsaw-game"},l.a.createElement("div",{className:"main-block"},l.a.createElement("div",{className:"jigsaw-block"},p.map((function(t,n){var a=M.isTouchMove&&M.boxIndex===n;return l.a.createElement(l.a.Fragment,{key:"originPiece-".concat(n)},l.a.createElement("div",{className:"box",style:a?{zIndex:2,position:"absolute",left:M.clientX,top:M.clientY}:{},onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),r[n]||("target"!==h.type?o((function(e){return j(j({},e),{},c()({},h.boxIndex,null))})):d((function(e){return j(j({},e),{},c()({},h.boxIndex,null))})),o((function(e){return j(j({},e),{},c()({},n,h.pieceIndex))})))}},r[n]&&l.a.createElement("div",{className:"piece order-".concat(r[n]),style:{backgroundImage:"url(".concat(u[E],")")},onDrag:function(e){e.preventDefault(),y({boxIndex:n,pieceIndex:r[n],type:"origin"})},onTouchMove:function(e){e.preventDefault();var t=e.targetTouches[0],c=t.target.getBoundingClientRect(),o=c.width,a=c.height;R({isTouchMove:!0,clientX:t.clientX-o/2,clientY:t.clientY-a-30,boxIndex:n,pieceIndex:r[n],type:"origin"})},onTouchEnd:function(t){t.preventDefault();var n=t.target.getBoundingClientRect(),r=n.left,a=n.right,i=n.top,l=n.bottom,u=e.current.getBoundingClientRect(),s=u.left,b=u.right,p=u.top,g=u.bottom,f=u.width,m=u.height/2+s,v=f/2+p;if(i>=p-10&&l<=g+10&&r>=s-10&&a<=b+10){var O=M.boxIndex,h=M.pieceIndex,y=null;l<=v+10&&a<=m+10?y=0:l<v+10&&r>m-10?y=1:i>=v-10&&a<=m+10?y=2:i>v-10&&r>m-10&&(y=3),"number"==typeof y&&(o((function(e){var t=j({},e);return delete t[O],t})),d((function(e){return e[y]?e:j(j({},e),{},c()({},y,h))})))}R({isTouchMove:!1})},draggable:!0})),a&&l.a.createElement("div",{className:"box"}))}))),l.a.createElement("div",{className:"jigsaw-block",ref:e},p.map((function(e,t){return l.a.createElement("div",{key:"targetPiece-".concat(t),className:"box",onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),f[t]||("target"!==h.type?o((function(e){return j(j({},e),{},c()({},h.boxIndex,null))})):d((function(e){return j(j({},e),{},c()({},h.boxIndex,null))})),d((function(e){return j(j({},e),{},c()({},t,h.pieceIndex))})))}},f[t]&&l.a.createElement("div",{className:"target order-".concat(f[t]),style:{backgroundImage:"url(".concat(u[E],")")},onDrag:function(e){e.preventDefault(),y({boxIndex:t,pieceIndex:f[t],type:"target"})},draggable:!0}))})))),l.a.createElement("div",{className:"actions"},l.a.createElement(O,{bgColor:"orange",onClick:Y},"提示"),l.a.createElement(O,{bgColor:"blue",onClick:T},"重來"),l.a.createElement(O,{bgColor:"green",onClick:B},"換題"),l.a.createElement(O,{bgColor:"teal",onClick:X},"完成")),I&&l.a.createElement("div",{className:"hint-modal",onClick:function(e){"hint-img"!==e.target.id&&P(!1)}},l.a.createElement("img",{src:u[E],alt:"hint",id:"hint-img"})))};n(104),t.default=y}}]);